angular.module("software.bytepushers.data.provider",[]),angular.module("software.bytepushers.data.provider").provider("DataProvider",function(){"use strict";var a;this.$get=function(){if(!angular.isDefined(a))throw new BytePushers.dao.DaoException("No DAO Configuration defined.");if(!angular.isArray(a.entities))throw new BytePushers.dao.DaoException("No DAO Entity Configurations defined.");if(angular.isArray(a.entities)&&0===a.entities.length)throw new BytePushers.dao.DaoException("No DAO Entity Configurations defined.");return a.entities.forEach(function(a){BytePushers.dao.DaoManager.getInstance().registerDao({name:"pmms-mobile-app",version:1,storeName:"pmms-mobile-app-data-store",description:"PMMS Mobile App Data Store",Entity:a,Dao:BytePushers.dao.LocalForageDao,dataStore:localforage,entityConfigs:{personEntityConfig:{entityIdValidationMethod:function(){return!0}}}})}),BytePushers.dao.DaoManager.getInstance()},this.setDataProviderConfig=function(b){a=b},this.getDataProviderConfig=function(){return a}}),function(a,b){"use strict";void 0!==a.BytePushers&&null!==a.BytePushers?b=a.BytePushers:(a.BytePushers={},b=a.BytePushers),b.dao=b.dao||b.namespace("software.bytepushers.data.dao"),b.dao.DaoException=function(a){b.dao.DaoException.prototype.superclass.apply(this,[a]),this.name="BytePushers.dao.DaoException",this.message=a},b.dao.DaoException.prototype=b.inherit(Error.prototype),b.dao.DaoException.prototype.constructor=b.dao.DaoException,b.dao.DaoException.prototype.superclass=Error,b.dao.DaoException.prototype.toString=function(){return this.name+"("+this.message+")"}}(window,BytePushers),function(a){"use strict";var b=function(b,c){var d;if(!Object.isConstructorFunction(b))throw new a.dao.DaoException("DAO Adapter(\n\n"+b.name+"\n\n) constructor method must be defined.");if(!Object.isDefined(c))throw new a.dao.DaoException("Entity Name(\n\n"+c+"\n\n) must be defined.");if(Object.isConstructorFunction(b)&&(d=b.name.substringBefore("LocalForageDao"),d=b.name.substringBefore("BaseDao"),d=b.name.substringBefore("Dao"),0===d.trim().length))throw new a.dao.DaoException("DAO Adapter("+b.name+") constructor method must be prefixed with the name of the platform it implements.  For example, 'LocalForage' is the prefix in 'LocalForageBaseDaoAdapter'.");return c+d+"Dao"},c=function(b){var c;if(!Object.isConstructorFunction(b))throw new a.dao.DaoException("Entity("+b+") constructor method must be defined.");return c=b.name};a=a||{},a.dao=a.dao||a.namespace("software.bytepushers.data.dao"),a.dao.DaoManager=function(){function d(a,b){var c;a=Object.isDefined(a)?a:{},b=Object.isDefined(b)?b:{};for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function e(a,b){var c=null;return d(k,b),Object.isDefined(l[a])&&("object"==typeof l[a]&&(c=l[a]),Object.isConstructorFunction(l[a])&&(c=new l[a])),c}function f(b){if(!Object.isDefined(b))throw new a.dao.DaoException("DAO Configuration must be defined.");if(!Object.isConstructorFunction(b.Entity))throw new a.dao.DaoException("DAO Configuration must define an Entity.");return b.Entity}function g(b){if(!Object.isDefined(b))throw new a.dao.DaoException("DAO Configuration must be defined.");if(!Object.isConstructorFunction(b.Dao))throw new a.dao.DaoException("DAO Configuration must define an DAO.");return b.Dao}function h(a){return k=a}function i(d){var e=f(d),i=g(d),j=c(e),k=b(i,j),m=k+"Impl",n=new Function("daoConfig","return function "+k+"() {this.__proto__.superclass.apply(this, [daoConfig]); }")(h(d));n.prototype=a.inherit(a.dao.LocalForageDao.prototype),n.prototype.constructor=n,n.prototype.superclass=a.dao.LocalForageDao,l[k]=n,l[m]=null}var j,k,l={};return{getInstance:function(){return void 0===j&&(j={getDao:e,registerDao:i}),j}}}()}(BytePushers),function(a){"use strict";a=a||{},a.dao=a.dao||a.namespace("software.bytepushers.data.dao");var b,c,d=function(a){return Object.isDefined(a)&&Object.isDefined(a.entity)&&Object.isFunction(a.entity.validationMethods.isValidEntityId)?a.entityIdValidationMethod:function(){return!0}};a.dao.GenericDAO=function(a){b=Object.isDefined(a)&&Object.isFunction(a.Entity)?a.Entity:null,c=d(a)},a.dao.GenericDAO.prototype.isEntityIdValid=c,a.dao.GenericDAO.prototype.createEntity=function(c){var d;if(!a.dao.GenericDAO.prototype.isPrototypeOf(this))throw new a.dao.DaoException("Can not call object unless in Object's hierarchy prototype chain.");return d=new b(c)},a.dao.GenericDAO.prototype.create=function(){if(!a.dao.GenericDAO.prototype.isPrototypeOf(this))throw new a.dao.DaoException("Can not call object unless in Object's hierarchy prototype chain.");throw new a.dao.DaoException("abstract method")},a.dao.GenericDAO.prototype.read=function(){if(!a.dao.GenericDAO.prototype.isPrototypeOf(this))throw new a.dao.DaoException("Can not call object unless in Object's hierarchy prototype chain.");throw new a.dao.DaoException("abstract method")},a.dao.GenericDAO.prototype.update=function(){if(!a.dao.GenericDAO.prototype.isPrototypeOf(this))throw new a.dao.DaoException("Can not call object unless in Object's hierarchy prototype chain.");throw new a.dao.DaoException("abstract method")},a.dao.GenericDAO.prototype["delete"]=function(){if(!a.dao.GenericDAO.prototype.isPrototypeOf(this))throw new a.dao.DaoException("Can not call object unless in Object's hierarchy prototype chain.");throw new a.dao.DaoException("abstract method")}}(BytePushers),function(a,b){"use strict";var c=null,d=function(b){if(!Object.isDefined(b.value))throw new a.exceptions.InvalidParameterException(b.description+": must be defined: "+b.value);if(this.isEntityIdValid(b.value))throw new a.exceptions.InvalidParameterException(b.description+": must be defined: "+b.value)},e=function(b){if(!Object.isDefined(b.value))throw new a.exceptions.InvalidParameterException(b.description+": must be defined: "+b.value)},f=function(a,b,c){try{c(a)}catch(d){if(Error.prototype.isPrototypeOf(b))throw new b(d)}},g=function(b){var c;if(!Object.isDefined(b))throw new a.dao.DaoException("LocalForage Config must be defined.");if(!Object.isDefined(b.name))throw new a.dao.DaoException("LocalForage Config: Data Store App Name must be defined.");if(!Object.isDefined(b.version))throw new a.dao.DaoException("LocalForage Config: Data Store Version must be defined.");if(!Object.isDefined(b.storeName))throw new a.dao.DaoException("LocalForage Config: Data Store Name must be defined.");if(!Object.isDefined(b.dataStore))throw new a.dao.DaoException("LocalForage Config: Data Store must be defined.");return c={name:b.name,version:b.version,storeName:b.storeName,description:b.description},Object.isDefined(b.driver)&&(c.driver=b.driver),Object.isNumeric(b.size)&&(c.size=b.size),b.dataStore.createInstance(c)},h=function(a){return Math.floor(Math.random()*a+1)},i=function(b){var c;return Object.isDefined(b)&&(a.implementsInterface(b,"getNoSqlId")?c=b.getNoSqlId():Object.isDefined(b.getId())?c=b.getId():(c=(new Date).getTime()+h(9999999),b.getMethod("setId")(c))),c},j=function(a){return a.toString()};a=a||{},a.dao=a.dao||a.namespace("software.bytepushers.data.dao"),a.dao.LocalForageDao=function(b){a.dao.LocalForageDao.prototype.superclass.apply(this,[b]),c=g(b)},a.dao.LocalForageDao.prototype=a.inherit(a.dao.GenericDAO.prototype),a.dao.LocalForageDao.prototype.constructor=a.dao.LocalForageDao,a.dao.LocalForageDao.prototype.superclass=a.dao.GenericDAO,a.dao.LocalForageDao.prototype.setDataStore=function(a){c=g(a)},a.dao.LocalForageDao.prototype.create=function(d){var g=this,h=new b(function(b,h){var k;try{if(!a.dao.LocalForageDao.prototype.isPrototypeOf(g))throw new a.dao.DaoException("Can not call object unless in LocalForageDao Object's hierarchy prototype chain.");f({description:"Entity",value:d},a.dao.DaoException,e)}catch(l){h(l)}k=(new a.util.Reflection).getInstance(d.constructor,d.toJSON()),i(k),c.setItem(j(k.getId()),new d.constructor(k.toJSON()).toJSON()).then(function(a){return a}).then(function(a){var c=g.createEntity(a);b(c)})["catch"](function(b){h(new a.dao.DaoException(b))})});return h},a.dao.LocalForageDao.prototype.read=function(g){var h,i=this,k=new b(function(b,k){try{if(!a.dao.LocalForageDao.prototype.isPrototypeOf(i))throw new a.dao.DaoException("Can not call object unless in LocalForageDao Object's hierarchy prototype chain.");f({description:"Entity ID",value:g},a.dao.DaoException,e),f({description:"Entity ID",value:g},a.dao.DaoException,d)}catch(l){k(l)}c.getItem(j(g)).then(function(a){a&&(h=i.createEntity(a)),b(h)})["catch"](function(b){k(new a.dao.DaoException(b))})});return k},a.dao.LocalForageDao.prototype.getItems=function(d){var e=this,f=[],g=new b(function(b,g){d=Object.isArray(d)?d:[],d.length>0?c.getItems(d).then(function(a){Object.isArray(a)&&a.forEach(function(a){f.push(e.createEntity(a))}),b(f)})["catch"](function(b){g(new a.dao.DaoException(b))}):b(f)});return g},a.dao.LocalForageDao.prototype.setItems=function(d){var e=this,f=[],g=new b(function(b,g){d=Object.isArray(d)?d:[],d.length>0?(d.forEach(function(a){a.key=j(a.key),a.value=a.value.toJSON()}),c.setItems(d).then(function(a){Object.isArray(a)&&a.forEach(function(a){f.push(e.createEntity(a))}),b(f)})["catch"](function(b){g(new a.dao.DaoException(b))})):b(f)});return g},a.dao.LocalForageDao.prototype.findById=function(c){var d=new b(function(b,d){a.dao.LocalForageDao.read(c).then(function(a){b(a)})["catch"](function(a){b(null)})});return d},a.dao.LocalForageDao.prototype.find=function(a,d){var e=this,f=[],g=new b(function(b,g){c.find(a,d).then(function(a){a.forEach(function(a){f.push(e.createEntity(a))}),b(f)})["catch"](function(a){b(f)})});return g},a.dao.LocalForageDao.prototype.update=function(g){var h=this,i=new b(function(b,i){try{if(!a.dao.LocalForageDao.prototype.isPrototypeOf(h))throw new a.dao.DaoException("Can not call object unless in LocalForageDao Object's hierarchy prototype chain.");f({description:"Entity",value:g},a.dao.DaoException,e),f({description:"Entity ID",value:g.getId()},a.dao.DaoException,d)}catch(k){i(k)}c.setItem(j(g.getId()),g.toJSON()).then(function(a){b(h.createEntity(a))})["catch"](function(b){i(new a.dao.DaoException(b))})});return i},a.dao.LocalForageDao.prototype["delete"]=function(g){var h=this,i=new b(function(b,i){try{if(!a.dao.LocalForageDao.prototype.isPrototypeOf(h))throw new a.dao.DaoException("Can not call object unless in LocalForageDao Object's hierarchy prototype chain.");f({description:"Entity ID",value:g},a.dao.DaoException,e),f({description:"Entity ID",value:g},a.dao.DaoException,d)}catch(k){i(k)}c.removeItem(j(g)).then(function(){b(!0)})["catch"](function(b){i(new a.dao.DaoException(b))})});return i}}(BytePushers,Promise),function(a,b){"use strict";void 0!==a.BytePushers&&null!==a.BytePushers?b=a.BytePushers:(a.BytePushers={},b=a.BytePushers),b.data=b.data||b.namespace("software.bytepushers.data.data"),b.data.DataException=function(a){b.data.DataException.prototype.superclass.apply(this,[a]),this.name="BytePushers.data.DataException",this.message=a},b.data.DataException.prototype=b.inherit(Error.prototype),b.data.DataException.prototype.constructor=b.data.DataException,b.data.DataException.prototype.superclass=Error,b.data.DataException.prototype.toString=function(){return this.name+"("+this.message+")"}}(window,BytePushers);